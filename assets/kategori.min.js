$(document).ready(function(){
      tampil();   
    });
    function tampil()
    {
          $('#datatable').DataTable({ 
                dom: 'lBfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "language": 
                    {
                    "search": "Cari:",
                    "lengthMenu": "Tampilkan _MENU_ data per halaman",
                    "zeroRecords": "Tidak ada data yang cocok",
                    "info": "Menampilkan _START_ sampai _END_  dari _MAX_ data",
                    "infoEmpty": "Data tidak ditemukan",
                    "infoFiltered": "(Terfilter _END_ data dari _MAX_ total data)"
                    },
                "responsive": true,
                "destroy" : true,
                "processing": true, //Feature control the processing indicator.
                "serverSide": true, //Feature control DataTables' server-side processing mode.
                "order": [], //Initial no order.

                // Load data for the table's content from an Ajax source
                "ajax": 
                {
                    "url": "<?php echo base_url('dashboard/Kategori/get_data')?>",
                    "type": "POST",
                    "data" : {'csrf_test_name': $('input[name=csrf_test_name]').val()},
                    "data" : function(data){
                      data.csrf_test_name =  $('input[name=csrf_test_name]').val();
                    },
                    "dataSrc": function(response){
                      $('input[name=csrf_test_name]').val(response.csrf_test_name);
                      return response.data;
                    }
                },
           
                //Set column definition initialisation properties.
                "columnDefs": 
                [
                    { 
                    "targets": [ -1 ], //last column
                    "orderable": false, //set not orderable
                    },
                ],

                });
      }      
    
      function reload_table()
    {
      var table =  $('#datatable').DataTable({ 
                dom: 'lBfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "language": 
                    {
                    "search": "Cari:",
                    "lengthMenu": "Tampilkan _MENU_ data per halaman",
                    "zeroRecords": "Tidak ada data yang cocok",
                    "info": "Menampilkan _START_ sampai _END_  dari _MAX_ data",
                    "infoEmpty": "Data tidak ditemukan",
                    "infoFiltered": "(Terfilter _END_ data dari _MAX_ total data)"
                    },
                "responsive": true,
                "destroy" : true,
                "processing": true, //Feature control the processing indicator.
                "serverSide": true, //Feature control DataTables' server-side processing mode.
                "order": [], //Initial no order.

                // Load data for the table's content from an Ajax source
                "ajax": 
                {
                    "url": "<?php echo base_url('dashboard/Kategori/get_data')?>",
                    "type": "POST",
                    "data" : {'csrf_test_name': $('input[name=csrf_test_name]').val()},
                    "data" : function(data){
                      data.csrf_test_name =  $('input[name=csrf_test_name]').val();
                    },
                    "dataSrc": function(response){
                      $('input[name=csrf_test_name]').val(response.csrf_test_name);
                      return response.data;
                    }
                },
           
                //Set column definition initialisation properties.
                "columnDefs": 
                [
                    { 
                    "targets": [ -1 ], //last column
                    "orderable": false, //set not orderable
                    },
                ],

                });
      
      table.ajax.reload(null,false);
      //reload datatable ajax 
    } 
    
    function hapus(id)
    {
      
      Swal.fire({
      title: 'Apakah anda yakin?',
      text: "Akan haps data ini",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Ya, hapus!'
      }).then((result) =>
      {
        if (result.value) 
          {
              $.ajax({
                
                    url: "<?php echo base_url('dashboard/Kategori/hapus/')?>"+id,
                    type: "post",
                    dataType: "JSON",
                    data : {'csrf_test_name': $('input[name=csrf_test_name]').val()},  
                    success: function(result) {

                      $('input[name=csrf_test_name]').val(result.token);
                      reload_table();
                      Swal.fire(
                      'Terhapus',
                      'Data telah di hapus !',
                      'success'
                      )
                          
                     }
                     
           
            });
              
          }
      })
   }
  